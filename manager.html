<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fantasy Football Draft</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .game-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            gap: 20px;
        }
        
        .player-info {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            flex: 1;
            text-align: center;
            backdrop-filter: blur(10px);
        }
        
        .player-info.active {
            background: rgba(52, 211, 153, 0.3);
            border: 2px solid #10b981;
        }
        
        .player-info.ai {
            background: rgba(168, 85, 247, 0.2);
            border: 2px solid #8b5cf6;
        }
        
        .player-info.ai.active {
            background: rgba(168, 85, 247, 0.3);
            border: 2px solid #8b5cf6;
        }
        
        .budget {
            font-size: 1.5rem;
            font-weight: bold;
            color: #fbbf24;
        }
        
        .players-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .player-card {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .player-card:hover {
            transform: translateY(-5px);
            border-color: #10b981;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }
        
        .player-card.selected {
            background: rgba(16, 185, 129, 0.2);
            border-color: #10b981;
        }
        
        .player-card.unavailable {
            opacity: 0.5;
            cursor: not-allowed;
            background: rgba(239, 68, 68, 0.2);
        }
        
        .player-name {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .player-position {
            color: #a78bfa;
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .player-cost {
            color: #fbbf24;
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .player-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 5px;
            font-size: 0.9rem;
        }
        
        .stat-row {
            display: flex;
            justify-content: space-between;
        }
        
        .stat-value {
            font-weight: bold;
            color: #34d399;
        }
        
        .teams-display {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }
        
        .team-section {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }
        
        .team-section h3 {
            text-align: center;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        
        .team-player {
            background: rgba(255,255,255,0.1);
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .formation-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin: 20px 0;
        }
        
        .formation-player {
            background: rgba(16, 185, 129, 0.2);
            border: 2px solid #10b981;
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            font-size: 0.8rem;
        }
        
        .formation-player.generic {
            background: rgba(239, 68, 68, 0.2);
            border-color: #ef4444;
        }
        
        .btn {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px 5px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.4);
        }
        
        .btn:disabled {
            background: #6b7280;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #6366f1, #4f46e5);
        }
        
        .btn-secondary:hover {
            box-shadow: 0 5px 15px rgba(99, 102, 241, 0.4);
        }
        
        .match-result {
            text-align: center;
            padding: 30px;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
        }
        
        .match-result h2 {
            font-size: 2rem;
            margin-bottom: 20px;
        }
        
        .score {
            font-size: 3rem;
            font-weight: bold;
            color: #fbbf24;
            margin: 20px 0;
        }
        
        .match-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        .team-stats {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 8px;
        }
        
        .hidden-stats {
            color: #9ca3af;
            font-style: italic;
        }
        
        .setup-screen {
            text-align: center;
            padding: 40px;
        }
        
        .setup-screen h2 {
            font-size: 2rem;
            margin-bottom: 20px;
        }
        
        .setup-screen p {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 15px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .rules {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            text-align: left;
            backdrop-filter: blur(10px);
        }
        
        .rules h3 {
            margin-bottom: 15px;
            color: #34d399;
        }
        
        .rules ul {
            padding-left: 20px;
        }
        
        .rules li {
            margin-bottom: 8px;
            line-height: 1.5;
        }

        .ai-thinking {
            text-align: center;
            padding: 20px;
            background: rgba(168, 85, 247, 0.2);
            border: 2px solid #8b5cf6;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .ai-thinking h3 {
            color: #a78bfa;
            margin-bottom: 10px;
        }

        .thinking-dots {
            display: inline-block;
            animation: dots 1.5s infinite;
        }

        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60%, 100% { content: '...'; }
        }

        .auto-complete-btn {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            margin-top: 10px;
        }

        .auto-complete-btn:hover {
            box-shadow: 0 5px 15px rgba(245, 158, 11, 0.4);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚öΩ Fantasy Football Draft</h1>
            <p>Construye tu equipo ideal contra la IA con formaci√≥n 4-3-3</p>
        </div>
        
        <div id="gameContent"></div>
    </div>

    <script>
        class FantasyFootballGame {
            constructor() {
                this.gameState = 'setup';
                this.currentPlayer = 1;
                this.playerBudgets = { 1: 500, 2: 500 };
                this.playerTeams = { 1: [], 2: [] };
                this.availablePlayers = [];
                this.draftOrder = [];
                this.currentDraftPick = 0;
                this.matchResult = null;
                this.aiThinking = false;
                
                // Posiciones requeridas para formaci√≥n 4-3-3
                this.FORMATION_433 = [
                    { position: 'GK', count: 1, name: 'Portero' },
                    { position: 'DFC', count: 2, name: 'Defensa Central' },
                    { position: 'LI', count: 1, name: 'Lateral Izquierdo' },
                    { position: 'LD', count: 1, name: 'Lateral Derecho' },
                    { position: 'MCD', count: 1, name: 'Mediocentro Defensivo' },
                    { position: 'MC', count: 2, name: 'Mediocentro' },
                    { position: 'MCO', count: 1, name: 'Mediocentro Ofensivo' },
                    { position: 'EI', count: 1, name: 'Extremo Izquierdo' },
                    { position: 'ED', count: 1, name: 'Extremo Derecho' },
                    { position: 'DC', count: 1, name: 'Delantero Centro' }
                ];
                
                this.init();
            }
            
            init() {
                this.generatePlayers();
                this.generateDraftOrder();
                this.render();
            }
            
            generateRandomName() {
                const nombres = ['Carlos', 'Luis', 'Mario', 'Diego', 'Pablo', 'Pedro', 'Juan', 'Miguel', 'Antonio', 'Francisco', 'Roberto', 'Fernando', 'Eduardo', 'Sergio', 'Ricardo', 'Andr√©s', 'Alejandro', 'Javier', 'Ra√∫l', 'Daniel'];
                const apellidos = ['Garc√≠a', 'Rodr√≠guez', 'L√≥pez', 'Mart√≠nez', 'Gonz√°lez', 'P√©rez', 'S√°nchez', 'Ram√≠rez', 'Cruz', 'Torres', 'Flores', 'G√≥mez', 'D√≠az', 'Morales', 'Jim√©nez', 'Hern√°ndez', 'Ruiz', 'Vargas', 'Castro', 'Ortega'];
                
                return `${nombres[Math.floor(Math.random() * nombres.length)]} ${apellidos[Math.floor(Math.random() * apellidos.length)]}`;
            }
            
            generatePlayers() {
                this.availablePlayers = [];
                let playerId = 1;
                
                this.FORMATION_433.forEach(pos => {
                    // Generar m√∫ltiples jugadores por posici√≥n (2-4 jugadores por posici√≥n)
                    const playersPerPosition = Math.floor(Math.random() * 3) + 2;
                    
                    for (let i = 0; i < playersPerPosition; i++) {
                        const baseStats = this.generateBaseStats(pos.position);
                        const cost = this.calculateCost(baseStats);
                        
                        this.availablePlayers.push({
                            id: playerId++,
                            name: this.generateRandomName(),
                            position: pos.position,
                            positionName: pos.name,
                            cost: cost,
                            stats: baseStats,
                            revealed: false,
                            drafted: false,
                            draftedBy: null
                        });
                    }
                });
                
                // Mezclar jugadores aleatoriamente
                this.availablePlayers = this.shuffleArray(this.availablePlayers);
            }
            
            generateBaseStats(position) {
                const baseRange = { min: 40, max: 95 };
                
                // Stats base para todas las posiciones
                let stats = {
                    velocidad: this.randomBetween(baseRange.min, baseRange.max),
                    defensa: this.randomBetween(baseRange.min, baseRange.max),
                    ataque: this.randomBetween(baseRange.min, baseRange.max),
                    pase: this.randomBetween(baseRange.min, baseRange.max),
                    resistencia: this.randomBetween(baseRange.min, baseRange.max),
                    precision: this.randomBetween(baseRange.min, baseRange.max)
                };
                
                // Ajustar stats seg√∫n posici√≥n
                switch(position) {
                    case 'GK':
                        stats.defensa += 20;
                        stats.precision += 15;
                        stats.ataque -= 30;
                        stats.velocidad -= 15;
                        break;
                    case 'DFC':
                    case 'LI':
                    case 'LD':
                        stats.defensa += 15;
                        stats.resistencia += 10;
                        stats.ataque -= 15;
                        break;
                    case 'MCD':
                        stats.defensa += 10;
                        stats.pase += 15;
                        stats.resistencia += 10;
                        stats.ataque -= 10;
                        break;
                    case 'MC':
                        stats.pase += 15;
                        stats.resistencia += 15;
                        break;
                    case 'MCO':
                        stats.ataque += 10;
                        stats.pase += 10;
                        stats.precision += 10;
                        stats.defensa -= 10;
                        break;
                    case 'EI':
                    case 'ED':
                        stats.velocidad += 15;
                        stats.ataque += 10;
                        stats.defensa -= 15;
                        break;
                    case 'DC':
                        stats.ataque += 20;
                        stats.precision += 15;
                        stats.defensa -= 20;
                        stats.resistencia -= 5;
                        break;
                }
                
                // Asegurar que los stats est√©n en rango v√°lido
                Object.keys(stats).forEach(key => {
                    stats[key] = Math.max(1, Math.min(99, stats[key]));
                });
                
                return stats;
            }
            
            calculateCost(stats) {
                const totalStats = Object.values(stats).reduce((sum, stat) => sum + stat, 0);
                const avgStat = totalStats / Object.keys(stats).length;
                
                // Base cost calculation
                let cost = Math.floor(avgStat * 1.2);
                
                // Add some randomness
                cost += this.randomBetween(-15, 15);
                
                // Round to nearest 5
                cost = Math.round(cost / 5) * 5;
                
                return Math.max(25, Math.min(120, cost));
            }
            
            randomBetween(min, max) {
                return Math.floor(Math.random() * (max - min + 1)) + min;
            }
            
            shuffleArray(array) {
                const shuffled = [...array];
                for (let i = shuffled.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
                }
                return shuffled;
            }
            
            generateDraftOrder() {
                // Generar orden de draft alternado para 22 picks (11 jugadores por equipo)
                this.draftOrder = [];
                for (let round = 0; round < 11; round++) {
                    if (round % 2 === 0) {
                        this.draftOrder.push(1, 2);
                    } else {
                        this.draftOrder.push(2, 1);
                    }
                }
            }
            
            startGame() {
                this.gameState = 'draft';
                this.currentPlayer = this.draftOrder[0];
                this.render();
                
                // Si la IA va primero, hacer que elija
                if (this.currentPlayer === 2) {
                    this.aiMakeChoice();
                }
            }
            
            draftPlayer(playerId) {
                if (this.currentPlayer === 2 || this.aiThinking) return; // Solo el humano puede hacer click
                
                const player = this.availablePlayers.find(p => p.id === playerId);
                if (!player || player.drafted || this.playerBudgets[this.currentPlayer] < player.cost) {
                    return;
                }
                
                this.performDraft(playerId);
            }
            
            performDraft(playerId) {
                const player = this.availablePlayers.find(p => p.id === playerId);
                if (!player || player.drafted || this.playerBudgets[this.currentPlayer] < player.cost) {
                    return;
                }
                
                // Draft the player
                player.drafted = true;
                player.draftedBy = this.currentPlayer;
                player.revealed = true;
                this.playerTeams[this.currentPlayer].push(player);
                this.playerBudgets[this.currentPlayer] -= player.cost;
                
                // Next pick
                this.currentDraftPick++;
                
                if (this.currentDraftPick < this.draftOrder.length) {
                    this.currentPlayer = this.draftOrder[this.currentDraftPick];
                    this.render();
                    
                    // Si es turno de la IA, hacer que elija
                    if (this.currentPlayer === 2) {
                        this.aiMakeChoice();
                    }
                } else {
                    this.completeTeams();
                    this.gameState = 'simulate';
                    this.render();
                }
            }
            
            aiMakeChoice() {
                this.aiThinking = true;
                this.render();
                
                setTimeout(() => {
                    const choice = this.getAIChoice();
                    if (choice) {
                        this.performDraft(choice);
                    } else {
                        // Si la IA no puede elegir, auto completar equipos
                        this.completeTeams();
                        this.gameState = 'simulate';
                        this.render();
                    }
                    this.aiThinking = false;
                }, 1500); // Simular tiempo de "pensamiento"
            }
            
            getAIChoice() {
                const aiTeam = this.playerTeams[2];
                const aiBudget = this.playerBudgets[2];
                
                // Contar posiciones actuales del equipo IA
                const positionCounts = {};
                aiTeam.forEach(player => {
                    positionCounts[player.position] = (positionCounts[player.position] || 0) + 1;
                });
                
                // Encontrar posiciones que necesita
                const neededPositions = [];
                this.FORMATION_433.forEach(pos => {
                    const needed = pos.count - (positionCounts[pos.position] || 0);
                    for (let i = 0; i < needed; i++) {
                        neededPositions.push(pos.position);
                    }
                });
                
                // Filtrar jugadores disponibles que la IA puede permitirse
                const affordablePlayers = this.availablePlayers.filter(player => 
                    !player.drafted && player.cost <= aiBudget
                );
                
                if (affordablePlayers.length === 0) {
                    return null;
                }
                
                // Priorizar jugadores de posiciones necesarias
                let priorityPlayers = affordablePlayers.filter(player => 
                    neededPositions.includes(player.position)
                );
                
                if (priorityPlayers.length === 0) {
                    priorityPlayers = affordablePlayers;
                }
                
                // Estrategia de IA: elegir el mejor jugador disponible seg√∫n valor por dinero
                priorityPlayers.sort((a, b) => {
                    const aValue = this.calculatePlayerValue(a);
                    const bValue = this.calculatePlayerValue(b);
                    return bValue - aValue;
                });
                
                return priorityPlayers[0]?.id;
            }
            
            calculatePlayerValue(player) {
                const totalStats = Object.values(player.stats).reduce((sum, stat) => sum + stat, 0);
                return totalStats / player.cost; // Valor por dinero
            }
            
            autoCompleteTeam() {
                if (this.currentPlayer !== 1) return;
                
                const remainingPicks = this.draftOrder.length - this.currentDraftPick;
                const humanPicks = this.draftOrder.slice(this.currentDraftPick).filter(p => p === 1).length;
                
                // Auto completar los picks del humano
                for (let i = 0; i < humanPicks; i++) {
                    const cheapestAffordable = this.availablePlayers
                        .filter(p => !p.drafted && p.cost <= this.playerBudgets[1])
                        .sort((a, b) => a.cost - b.cost)[0];
                    
                    if (cheapestAffordable) {
                        cheapestAffordable.drafted = true;
                        cheapestAffordable.draftedBy = 1;
                        cheapestAffordable.revealed = true;
                        this.playerTeams[1].push(cheapestAffordable);
                        this.playerBudgets[1] -= cheapestAffordable.cost;
                    }
                }
                
                // Completar picks de la IA
                const aiPicks = this.draftOrder.slice(this.currentDraftPick).filter(p => p === 2).length;
                for (let i = 0; i < aiPicks; i++) {
                    const aiChoice = this.getAIChoice();
                    if (aiChoice) {
                        const player = this.availablePlayers.find(p => p.id === aiChoice);
                        if (player && !player.drafted) {
                            player.drafted = true;
                            player.draftedBy = 2;
                            player.revealed = true;
                            this.playerTeams[2].push(player);
                            this.playerBudgets[2] -= player.cost;
                        }
                    }
                }
                
                this.completeTeams();
                this.gameState = 'simulate';
                this.render();
            }
            
            completeTeams() {
                // Fill incomplete teams with generic players
                [1, 2].forEach(playerNum => {
                    const team = this.playerTeams[playerNum];
                    const positionCounts = {};
                    
                    // Count current positions
                    team.forEach(player => {
                        positionCounts[player.position] = (positionCounts[player.position] || 0) + 1;
                    });
                    
                    // Add generic players for missing positions
                    this.FORMATION_433.forEach(pos => {
                        const needed = pos.count - (positionCounts[pos.position] || 0);
                        for (let i = 0; i < needed; i++) {
                            team.push({
                                id: `generic-${playerNum}-${pos.position}-${i}`,
                                name: 'Jugador Gen√©rico',
                                position: pos.position,
                                positionName: pos.name,
                                cost: 0,
                                stats: {
                                    velocidad: 1,
                                    defensa: 1,
                                    ataque: 1,
                                    pase: 1,
                                    resistencia: 1,
                                    precision: 1
                                },
                                revealed: true,
                                drafted: true,
                                draftedBy: playerNum,
                                generic: true
                            });
                        }
                    });
                });
            }
            
            simulateMatch() {
                const team1 = this.playerTeams[1];
                const team2 = this.playerTeams[2];
                
                const team1Stats = this.calculateTeamStats(team1);
                const team2Stats = this.calculateTeamStats(team2);
                
                // Simple match simulation
                const team1Power = (team1Stats.ataque + team1Stats.velocidad + team1Stats.precision) * 0.6 + 
                                 (team1Stats.defensa + team1Stats.resistencia) * 0.4;
                const team2Power = (team2Stats.ataque + team2Stats.velocidad + team2Stats.precision) * 0.6 + 
                                 (team2Stats.defensa + team2Stats.resistencia) * 0.4;
                
                const powerDiff = team1Power - team2Power;
                const randomFactor = (Math.random() - 0.5) * 100; // Random factor for realism
                
                const finalDiff = powerDiff + randomFactor;
                
                let team1Goals = Math.max(0, Math.floor(Math.random() * 4) + Math.floor(finalDiff / 50));
                let team2Goals = Math.max(0, Math.floor(Math.random() * 4) - Math.floor(finalDiff / 50));
                
                // Ensure realistic scores
                team1Goals = Math.min(6, team1Goals);
                team2Goals = Math.min(6, team2Goals);
                
                this.matchResult = {
                    team1Goals,
                    team2Goals,
                    team1Stats,
                    team2Stats,
                    winner: team1Goals > team2Goals ? 1 : (team2Goals > team1Goals ? 2 : 0)
                };
                
                this.gameState = 'results';
                this.render();
            }
            
            calculateTeamStats(team) {
                const stats = {
                    velocidad: 0,
                    defensa: 0,
                    ataque: 0,
                    pase: 0,
                    resistencia: 0,
                    precision: 0
                };
                
                team.forEach(player => {
                    Object.keys(stats).forEach(stat => {
                        stats[stat] += player.stats[stat];
                    });
                });
                
                // Average stats
                Object.keys(stats).forEach(stat => {
                    stats[stat] = Math.floor(stats[stat] / team.length);
                });
                
                return stats;
            }
            
            resetGame() {
                this.gameState = 'setup';
                this.currentPlayer = 1;
                this.playerBudgets = { 1: 500, 2: 500 };
                this.playerTeams = { 1: [], 2: [] };
                this.currentDraftPick = 0;
                this.matchResult = null;
                this.aiThinking = false;
                this.generatePlayers();
                this.generateDraftOrder();
                this.render();
            }
            
            render() {
                const content = document.getElementById('gameContent');
                content.innerHTML = '';
                
                switch(this.gameState) {
                    case 'setup':
                        content.innerHTML = this.renderSetup();
                        break;
                    case 'draft':
                        content.innerHTML = this.renderDraft();
                        break;
                    case 'simulate':
                        content.innerHTML = this.renderSimulate();
                        break;
                    case 'results':
                        content.innerHTML = this.renderResults();
                        break;
                }
                
                this.attachEventListeners();
            }
            
            renderSetup() {
                return `
                    <div class="setup-screen">
                        <h2>¬°Bienvenido al Fantasy Football Draft!</h2>
                        <p>Construye tu equipo ideal seleccionando jugadores por turnos contra la IA con un presupuesto limitado.</p>
                        
                        <div class="rules">
                            <h3>üìã Reglas del Juego:</h3>
                            <ul>
                                <li><strong>Presupuesto:</strong> Cada jugador tiene 500 monedas para gastar</li>
                                <li><strong>Oponente:</strong> Juegas contra una IA inteligente</li>
                                <li><strong>Formaci√≥n:</strong> Debes completar una formaci√≥n 4-3-3 (11 jugadores)</li>
                                <li><strong>Turnos:</strong> T√∫ y la IA se alternan para elegir</li>
                                <li><strong>Informaci√≥n:</strong> Solo ves nombre, posici√≥n y costo antes de comprar</li>
                                <li><strong>Estad√≠sticas:</strong> Se revelan despu√©s de la compra</li>
                                <li><strong>Auto-completar:</strong> Si se te acaba el presupuesto, puedes auto-completar con jugadores baratos</li>
                                <li><strong>Jugadores gen√©ricos:</strong> Si no completas tu equipo, se rellenan autom√°ticamente con jugadores de 1 punto</li>
                            </ul>
                        </div>
                        
                        <div class="rules">
                            <h3>‚öΩ Posiciones Requeridas (4-3-3):</h3>
                            <ul>
                                <li>1 Portero (GK)</li>
                                <li>2 Defensas Centrales (DFC)</li>
                                <li>1 Lateral Izquierdo (LI) + 1 Lateral Derecho (LD)</li>
                                <li>1 Mediocentro Defensivo (MCD)</li>
                                <li>2 Mediocentros (MC)</li>
                                <li>1 Mediocentro Ofensivo (MCO)</li>
                                <li>1 Extremo Izquierdo (EI) + 1 Extremo Derecho (ED)</li>
                                <li>1 Delantero Centro (DC)</li>
                            </ul>
                        </div>
                        
                        <button class="btn" onclick="game.startGame()">üöÄ Comenzar Draft vs IA</button>
                    </div>
                `;
            }
            
            renderDraft() {
                const currentPlayerName = this.currentPlayer === 1 ? 'Tu turno' : 'Turno de la IA';
                const currentBudget = this.playerBudgets[this.currentPlayer];
                const pickNumber = this.currentDraftPick + 1;
                const totalPicks = this.draftOrder.length;
                
                // Verificar si el jugador humano puede permitirse alg√∫n jugador
                const canAffordAny = this.availablePlayers.some(p => 
                    !p.drafted && p.cost <= this.playerBudgets[1]
                );
                
                let html = `
                    <div class="game-info">
                        <div class="player-info ${this.currentPlayer === 1 ? 'active' : ''}">
                            <h3>üë§ T√∫</h3>
                            <div class="budget">üí∞ ${this.playerBudgets[1]} monedas</div>
                            <div>Jugadores: ${this.playerTeams[1].length}/11</div>
                        </div>
                        <div class="player-info ai ${this.currentPlayer === 2 ? 'active' : ''}">
                            <h3>ü§ñ IA</h3>
                            <div class="budget">üí∞ ${this.playerBudgets[2]} monedas</div>
                            <div>Jugadores: ${this.playerTeams[2].length}/11</div>
                        </div>
                    </div>
                `;
                
                if (this.aiThinking) {
                    html += `
                        <div class="ai-thinking">
                            <h3>ü§ñ La IA est√° pensando<span class="thinking-dots">...</span></h3>
                            <p>Analizando opciones disponibles...</p>
                        </div>
                    `;
                } else {
                    html += `
                        <div style="text-align: center; margin-bottom: 20px;">
                            <h2>üéØ ${currentPlayerName}</h2>
                            <p>Pick ${pickNumber} de ${totalPicks} | Presupuesto actual: ${currentBudget} monedas</p>
                            ${!canAffordAny && this.currentPlayer === 1 ? 
                                '<button class="btn auto-complete-btn" onclick="game.autoCompleteTeam()">‚ö° Auto-completar equipo</button>' : ''
                            }
                        </div>
                    `;
                }
                
                html += '<div class="players-grid">';
                
                this.availablePlayers.forEach(player => {
                    const canAfford = currentBudget >= player.cost;
                    const isAvailable = !player.drafted;
                    const isPlayerTurn = this.currentPlayer === 1 && !this.aiThinking;
                    const cardClass = !isAvailable ? 'unavailable' : (!canAfford || !isPlayerTurn ? 'unavailable' : '');
                    
                    html += `
                        <div class="player-card ${cardClass}" onclick="game.draftPlayer(${player.id})">
                            <div class="player-name">${player.name}</div>
                            <div class="player-position">${player.positionName} (${player.position})</div>
                            <div class="player-cost">üí∞ ${player.cost} monedas</div>
                            ${player.revealed ? this.renderPlayerStats(player) : '<div class="hidden-stats">üìä Stats ocultas hasta comprar</div>'}
                            ${!isAvailable ? '<div style="color: #ef4444; font-weight: bold;">‚ùå Ya seleccionado</div>' : ''}
                            ${!canAfford && isAvailable && isPlayerTurn ? '<div style="color: #f59e0b; font-weight: bold;">üí∏ Sin presupuesto</div>' : ''}
                            ${!isPlayerTurn && isAvailable ? '<div style="color: #9ca3af; font-weight: bold;">‚è≥ Turno de la IA</div>' : ''}
                        </div>
                    `;
                });
                
                html += '</div>';
                
                // Show current teams
                html += this.renderCurrentTeams();
                
                return html;
            }
            
            renderPlayerStats(player) {
                return `
                    <div class="player-stats">
                        <div class="stat-row">
                            <span>üèÉ Velocidad:</span>
                            <span class="stat-value">${player.stats.velocidad}</span>
                        </div>
                        <div class="stat-row">
                            <span>üõ°Ô∏è Defensa:</span>
                            <span class="stat-value">${player.stats.defensa}</span>
                        </div>
                        <div class="stat-row">
                            <span>‚öîÔ∏è Ataque:</span>
                            <span class="stat-value">${player.stats.ataque}</span>
                        </div>
                        <div class="stat-row">
                            <span>üéØ Pase:</span>
                            <span class="stat-value">${player.stats.pase}</span>
                        </div>
                        <div class="stat-row">
                            <span>üí™ Resistencia:</span>
                            <span class="stat-value">${player.stats.resistencia}</span>
                        </div>
                        <div class="stat-row">
                            <span>üéØ Precisi√≥n:</span>
                            <span class="stat-value">${player.stats.precision}</span>
                        </div>
                    </div>
                `;
            }
            
            renderCurrentTeams() {
                return `
                    <div class="teams-display">
                        <div class="team-section">
                            <h3>üë§ Tu Equipo (${this.playerTeams[1].length}/11)</h3>
                            ${this.renderTeamPlayers(1)}
                        </div>
                        <div class="team-section">
                            <h3>ü§ñ Equipo IA (${this.playerTeams[2].length}/11)</h3>
                            ${this.renderTeamPlayers(2)}
                        </div>
                    </div>
                `;
            }
            
            renderTeamPlayers(playerNum) {
                const team = this.playerTeams[playerNum];
                if (team.length === 0) {
                    return '<p style="text-align: center; color: #9ca3af;">A√∫n no ha seleccionado jugadores</p>';
                }
                
                let html = '';
                team.forEach(player => {
                    const genericClass = player.generic ? ' generic' : '';
                    html += `
                        <div class="team-player${genericClass}">
                            <div>
                                <strong>${player.name}</strong><br>
                                <small>${player.positionName} (${player.position})</small>
                            </div>
                            <div style="text-align: right;">
                                <strong>üí∞ ${player.cost}</strong><br>
                                <small>Promedio: ${this.calculatePlayerAverage(player.stats)}</small>
                            </div>
                        </div>
                    `;
                });
                return html;
            }
            
            calculatePlayerAverage(stats) {
                const total = Object.values(stats).reduce((sum, stat) => sum + stat, 0);
                return Math.floor(total / Object.keys(stats).length);
            }
            
            renderSimulate() {
                return `
                    <div style="text-align: center; padding: 40px;">
                        <h2>üèÜ ¬°Draft Completado!</h2>
                        <p style="font-size: 1.2rem; margin-bottom: 30px;">
                            Ambos equipos est√°n listos. Es hora de simular el partido contra la IA.
                        </p>
                        
                        <div class="teams-display">
                            <div class="team-section">
                                <h3>üë§ Tu Equipo</h3>
                                <div style="margin-bottom: 10px;">
                                    <strong>üí∞ Gastado:</strong> ${500 - this.playerBudgets[1]} / 500 monedas
                                </div>
                                ${this.renderFormation(1)}
                            </div>
                            <div class="team-section">
                                <h3>ü§ñ Equipo IA</h3>
                                <div style="margin-bottom: 10px;">
                                    <strong>üí∞ Gastado:</strong> ${500 - this.playerBudgets[2]} / 500 monedas
                                </div>
                                ${this.renderFormation(2)}
                            </div>
                        </div>
                        
                        <button class="btn" onclick="game.simulateMatch()">‚öΩ Simular Partido</button>
                        <button class="btn btn-secondary" onclick="game.resetGame()">üîÑ Nuevo Draft</button>
                    </div>
                `;
            }
            
            renderFormation(playerNum) {
                const team = this.playerTeams[playerNum];
                const formation = {
                    GK: team.filter(p => p.position === 'GK'),
                    DEF: team.filter(p => ['DFC', 'LI', 'LD'].includes(p.position)),
                    MID: team.filter(p => ['MCD', 'MC', 'MCO'].includes(p.position)),
                    FWD: team.filter(p => ['EI', 'ED', 'DC'].includes(p.position))
                };
                
                let html = '<div class="formation-grid">';
                
                // Portero
                formation.GK.forEach(player => {
                    html += `<div class="formation-player${player.generic ? ' generic' : ''}">
                        <strong>${player.name}</strong><br>
                        <small>GK (${this.calculatePlayerAverage(player.stats)})</small>
                    </div>`;
                });
                
                // Defensores
                formation.DEF.forEach(player => {
                    html += `<div class="formation-player${player.generic ? ' generic' : ''}">
                        <strong>${player.name}</strong><br>
                        <small>${player.position} (${this.calculatePlayerAverage(player.stats)})</small>
                    </div>`;
                });
                
                // Centrocampistas
                formation.MID.forEach(player => {
                    html += `<div class="formation-player${player.generic ? ' generic' : ''}">
                        <strong>${player.name}</strong><br>
                        <small>${player.position} (${this.calculatePlayerAverage(player.stats)})</small>
                    </div>`;
                });
                
                // Delanteros
                formation.FWD.forEach(player => {
                    html += `<div class="formation-player${player.generic ? ' generic' : ''}">
                        <strong>${player.name}</strong><br>
                        <small>${player.position} (${this.calculatePlayerAverage(player.stats)})</small>
                    </div>`;
                });
                
                html += '</div>';
                return html;
            }
            
            renderResults() {
                const result = this.matchResult;
                let winnerText = '';
                
                if (result.winner === 0) {
                    winnerText = 'ü§ù ¬°Empate!';
                } else if (result.winner === 1) {
                    winnerText = 'üèÜ ¬°Has Ganado!';
                } else {
                    winnerText = 'ü§ñ ¬°La IA ha Ganado!';
                }
                
                return `
                    <div class="match-result">
                        <h2>‚öΩ Resultado Final</h2>
                        <div class="score">
                            ${result.team1Goals} - ${result.team2Goals}
                        </div>
                        <h3>${winnerText}</h3>
                        
                        <div class="match-details">
                            <div class="team-stats">
                                <h4>üìä Tus Estad√≠sticas</h4>
                                <div class="stat-row">
                                    <span>üí∞ Dinero gastado:</span>
                                    <span>${500 - this.playerBudgets[1]} / 500</span>
                                </div>
                                <div class="stat-row">
                                    <span>üèÉ Velocidad promedio:</span>
                                    <span>${result.team1Stats.velocidad}</span>
                                </div>
                                <div class="stat-row">
                                    <span>üõ°Ô∏è Defensa promedio:</span>
                                    <span>${result.team1Stats.defensa}</span>
                                </div>
                                <div class="stat-row">
                                    <span>‚öîÔ∏è Ataque promedio:</span>
                                    <span>${result.team1Stats.ataque}</span>
                                </div>
                                <div class="stat-row">
                                    <span>üéØ Pase promedio:</span>
                                    <span>${result.team1Stats.pase}</span>
                                </div>
                                <div class="stat-row">
                                    <span>üí™ Resistencia promedio:</span>
                                    <span>${result.team1Stats.resistencia}</span>
                                </div>
                                <div class="stat-row">
                                    <span>üéØ Precisi√≥n promedio:</span>
                                    <span>${result.team1Stats.precision}</span>
                                </div>
                            </div>
                            
                            <div class="team-stats">
                                <h4>üìä Estad√≠sticas IA</h4>
                                <div class="stat-row">
                                    <span>üí∞ Dinero gastado:</span>
                                    <span>${500 - this.playerBudgets[2]} / 500</span>
                                </div>
                                <div class="stat-row">
                                    <span>üèÉ Velocidad promedio:</span>
                                    <span>${result.team2Stats.velocidad}</span>
                                </div>
                                <div class="stat-row">
                                    <span>üõ°Ô∏è Defensa promedio:</span>
                                    <span>${result.team2Stats.defensa}</span>
                                </div>
                                <div class="stat-row">
                                    <span>‚öîÔ∏è Ataque promedio:</span>
                                    <span>${result.team2Stats.ataque}</span>
                                </div>
                                <div class="stat-row">
                                    <span>üéØ Pase promedio:</span>
                                    <span>${result.team2Stats.pase}</span>
                                </div>
                                <div class="stat-row">
                                    <span>üí™ Resistencia promedio:</span>
                                    <span>${result.team2Stats.resistencia}</span>
                                </div>
                                <div class="stat-row">
                                    <span>üéØ Precisi√≥n promedio:</span>
                                    <span>${result.team2Stats.precision}</span>
                                </div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 30px;">
                            <button class="btn" onclick="game.resetGame()">üîÑ Jugar de Nuevo</button>
                        </div>
                    </div>
                    
                    <div class="teams-display" style="margin-top: 20px;">
                        <div class="team-section">
                            <h3>üë§ Tu Equipo Final</h3>
                            ${this.renderFinalTeam(1)}
                        </div>
                        <div class="team-section">
                            <h3>ü§ñ Equipo Final IA</h3>
                            ${this.renderFinalTeam(2)}
                        </div>
                    </div>
                `;
            }
            
            renderFinalTeam(playerNum) {
                const team = this.playerTeams[playerNum];
                let html = '';
                
                team.forEach(player => {
                    const genericClass = player.generic ? ' generic' : '';
                    html += `
                        <div class="team-player${genericClass}">
                            <div>
                                <strong>${player.name}</strong><br>
                                <small>${player.positionName} (${player.position})</small>
                            </div>
                            <div style="text-align: right;">
                                <strong>üí∞ ${player.cost}</strong><br>
                                <small>Promedio: ${this.calculatePlayerAverage(player.stats)}</small><br>
                                ${this.renderMiniStats(player.stats)}
                            </div>
                        </div>
                    `;
                });
                
                return html;
            }
            
            renderMiniStats(stats) {
                return `
                    <div style="font-size: 0.7rem; color: #9ca3af;">
                        V:${stats.velocidad} D:${stats.defensa} A:${stats.ataque} P:${stats.pase} R:${stats.resistencia} Pr:${stats.precision}
                    </div>
                `;
            }
            
            attachEventListeners() {
                // Los event listeners se manejan directamente en el onclick de los elementos HTML
                // para simplicidad en este ejemplo
            }
        }
        
        // Inicializar el juego cuando se carga la p√°gina
        let game;
        window.addEventListener('load', () => {
            game = new FantasyFootballGame();
        });
    </script>
</body>
</html>
